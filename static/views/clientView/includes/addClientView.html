<!DOCTYPE HTML>
<html ng-app='app'>
<head>
    <!--Image Tittle-->
    <link rel="shortcut icon" type="image/jpg" href="img/image.jpg">
    <!--Bootstrao css-->
    <link rel="stylesheet" href="../../stylesheets/bootstrap-3.3.5-dist/css/bootstrap.min.css"/>
    <!--Font-Awesome css-->
    <link rel="stylesheet" href="../../stylesheets/bootstrap-3.3.5-dist/font-awesome-4.3.0/css/font-awesome.min.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link type="text/css" rel="stylesheet" href="../../stylesheets/main.css" />
    <!--<script src="js/angular-1.3.0/angular.js"></script>-->
    <script  type="text/javascript" src="../../js/appCliente.js" ></script>
    <meta charset="UTF-8">
    <title>DoceClara</title>
</head>
<body ng-controller="AddClientController as addClntCtrl">
    <div id="container">
        <!--
        TOP Nav-bar
        -->
        <header>
            <div >
                <nav class="nav">
                    <ul>
                        <li><a href="/static/js">Início</a></li>
                        <li><a href="/client">Clientes</a></li>
                        <li><a href="/dessert">Sobremesas</a></li>
                        <li><a href="/ingredient">Ingredientes</a></li>
                        <li><a href="/request">Pedidos</a></li>
                        <li><a href="">Resumo</a></li>
                    </ul>
                 </nav>
            </div>
        </header>
        <!-- ENDING MENU-BAR-->
        <!--
        TODO Nav bar
        -->
        <aside>
            <div id="sidebar" class="nav-collapse" style="overflow: hidden; outline: none;">
                <ul class="sidebar-menu">
                    <li><img src="img/Imagem1.png" class="logo" width="160"></li>
                </ul>
                <div class="logo">

                </div>
            </div>
        </aside>
        <!-- ENDING SIDE BAR-->
        <div id="main-content">
            <section class="wrapper">
                <div  class="page-header">
                    <h1> Adicionar Cliente</h1>
                </div>
                <div class="col-md-8 showback">
                    <form name="clientForm" style="overflow: hidden;" novalidate>
                        <div class="form-group col-md-6">
                            <label for="clientName">Nome:</label>
                            <input  type="text" id="clientName" name="clientName" class="form-control" ng-model="addClntCtrl.client.name" />
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="telephone">Telefone: </label>
                            <input type="text" id="telephone" name="telephone" class="form-control" ng-model="addClntCtrl.client.telephone"/>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="portionAmount">Número de Pedidos:</label>
                            <input type="number" id="portionAmount" name="portionAmount" min="0" class="form-control" ng-model="addClntCtrl.client.portionAmount"/>
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="control-label"> Valor:</label>
                            <div class="input-group">
                                <div class="input-group-addon">$</div>
                                <p id="total_cost" class="form-control">{{cost | number:2}}</p>
                                <div class="input-group-addon"></div>
                            </div>
                        </div>
                        <section ng-controller="AddToClientController as addRqst">
                            <div class="col-md-6 form-group ">
                                <label for="requestList"> Adicione um pedido: </label>
                                <select class="form-control" id="requestList" ng-model="addRqst.myRqst.request"
                                        ng-options="reqst.name for reqst in addRqst.requestList"
                                        ng-change="addRqst.selectRequest()">
                                    <option value="">-- Escolha um Pedido --</option>
                                </select>
                            </div>

                            <div class="col-md-2 form-group amountInput" ng-show="addRqst.addRequestFlag">
                                <label for="requestAmount"> Quantidade: </label>
                                <input type="number" id="requestAmount" name="requestAmount" min="0" step="0.1" class="form-control" ng-model="addRqst.myRqst.quantity" ng-required="true">
                            </div>
                        </section>
                            <div class="col-md-2 form-group" ng-show="addRqst.addRequestFlag">
                                <button id="addRequesttBtn" class="btn btn-primary addToClienttBtn" ng-click="addClntCtrl.addRequest(addRqst.myRqst); addRqst.clearRequest()">
                                    <i class="fa fa-plus"></i><strong>Adicionar</strong>
                                </button>
                            </div>

                       < div>
                            <table class="table table-hover">
                                <caption>Pedidos</caption>
                                <tr>
                                    <th>Nome</th>
                                    <th>Valor</th>
                                    <th>Quantidade</th>
                                    <th>Ações</th>
                                </tr>
                                <tr ng-hide="addClntCtrl.client.pedidos.length === 0" ng-repeat="ing in addClntCtrl.client.requestList">
                                    <td>{{ing.request.name}}</td>
                                    <td>{{(ing.request.total_cost*ing.quantity)/ing.request.total_amount | number:2}}</td>
                                    <td>{{ing.quantity | number:3}}</td>
                                    <td>
                                        <button class="btn btn-primary btn-xs" title="Editar"><span class="fa fa-edit"></span></button>
                                        <button class="btn btn-danger btn-xs" title="Excluir"><span class="fa fa-trash-o"></span></button>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4" ng-show="addClntCtrl.client.pedidos.length === 0">Não existe Pedido cadastrado.</td>
                                </tr>
                            </table>
                            <div class="col-md-12">
                                <div>
                                    <a href="/static/js"><button id="backToList" class="btn btn-primary" >Voltar </button></a>
                                </div>
                                <div>
                                  <button id="addClient" class="btn btn-primary" ng-click="addClntCtrl.addClient()"
                                  style="margin-right: 10px;">
                                      Adicionar</button>
                                </div>

                        </div>
                    </form>
                </div>
            </section>
        </div>
    </div>
</body>
</html>